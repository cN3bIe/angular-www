{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/js-es6/AppCtrl/index.js","app/js-es6/LS/index.js","app/js-es6/LeftCtrl/index.js","app/js-es6/LoginForm/index.js","app/js-es6/ProfileForm/index.js","app/js-es6/RegistrationForm/index.js","app/js-es6/app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","AppCtrl","$scope","$timeout","$mdSidenav","$log","contryREST","_classCallCheck","this","title","project","description","special","toggleLeft","buildDelayedToggler","func","wait","context","timer","args","Array","prototype","slice","arguments","cancel","undefined","apply","navID","debounce","toggle","then","debug","$inject","LS","name","data","localStorage","setItem","JSON","stringify","parse","getItem","clear","location","reload","LeftCtrl","close","LoginForm","$location","user","email","pass","get","find","set","path","ProfileForm","$q","query","country","fields","type","deferred","defer","toLowerCase","result","resolve","error","log","promise","obj","info","searchTextCity","city","capital","oldUser","users","map","el","id","arr","RegistrationForm","_contryREST","_$q","console","Math","floor","random","some","push","loginRequired","_LS2","default","reject","angular","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","_AppCtrl2","_LeftCtrl2","_LoginForm2","_RegistrationForm2","_ProfileForm2","factory","$resource"],"mappings":"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","file":"main.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","class AppCtrl {\r\n\tconstructor($scope, $timeout, $mdSidenav, $log,contryREST){\r\n\t\tthis.title = 'Hey';\r\n\t\tthis.project = {\r\n\t\t\tdescription: '',\r\n\t\t\tspecial: true\r\n\t\t};\r\n\t\tthis.toggleLeft = this.buildDelayedToggler('left');\r\n\t}\r\n\tdebounce(func, wait, context) {\r\n\t\tlet timer;\r\n\t\treturn function debounced() {\r\n\t\t\tlet context = $scope,\r\n\t\t\targs = Array.prototype.slice.call(arguments);\r\n\t\t\t$timeout.cancel(timer);\r\n\t\t\ttimer = $timeout(function() {\r\n\t\t\t\ttimer = undefined;\r\n\t\t\t\tfunc.apply(context, args);\r\n\t\t\t}, wait || 10);\r\n\t\t};\r\n\t}\r\n\r\n\tbuildDelayedToggler(navID) {\r\n\t\treturn this.debounce(() => {\r\n\t\t\t$mdSidenav(navID)\r\n\t\t\t.toggle()\r\n\t\t\t.then( () => {\r\n\t\t\t\t$log.debug(\"toggle \" + navID + \" is done\")\r\n\t\t\t});\r\n\t\t}, 200);\r\n\t}\r\n\r\n\tbuildToggler(navID) {\r\n\t\treturn () => {\r\n\t\t\t$mdSidenav(navID)\r\n\t\t\t.toggle()\r\n\t\t\t.then( () => {\r\n\t\t\t\t$log.debug(\"toggle \" + navID + \" is done\")\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n};\r\n\r\nAppCtrl.$inject = ['$scope', '$timeout', '$mdSidenav', '$log','contryREST'];\r\nexport default AppCtrl;","export default class LS {\r\n\tstatic set(name,data){\r\n\t\tlocalStorage.setItem(name,JSON.stringify(data) );\r\n\t}\r\n\tstatic get(name){\r\n\t\treturn JSON.parse( localStorage.getItem(name) );\r\n\t}\r\n\tstatic clear(){\r\n\t\tlocalStorage.clear(); location.reload();\r\n\t}\r\n};","class LeftCtrl {\r\n\tconstructor($scope, $timeout, $mdSidenav, $log){\r\n\t\t$scope.close = () => {\r\n\t\t\t$mdSidenav('left').close()\r\n\t\t\t.then(() => {\r\n\t\t\t\t$log.debug(\"close LEFT is done\");\r\n\t\t\t});\r\n\t\t};\r\n\t}\r\n};\r\n\r\nLeftCtrl.$inject = ['$scope', '$timeout', '$mdSidenav', '$log'];\r\nexport default LeftCtrl;","class LoginForm {\r\n\tconstructor( $scope, $location ){\r\n\t\tthis.user = {\r\n\t\t\temail: '',\r\n\t\t\tpass: '',\r\n\t\t};\r\n\t}\r\n\tsubmit(){\r\n\t\tlet users = LS.get('users') || [];\r\n\t\tlet user = users.find( u => u.email === $scope.user.email && u.pass === $scope.user.pass );\r\n\t\tif( user ){\r\n\t\t\tLS.set('login',true);\r\n\t\t\tLS.set('user',user);\r\n\t\t\t$location.path('/profile');\r\n\t\t}\r\n\t}\r\n};\r\n\r\nLoginForm.$inject = ['$scope', '$location'];\r\nexport default LoginForm;","class ProfileForm {\r\n\tconstructor( $scope, $timeout, $q, $log,contryREST ){\r\n\t\t$scope.user = LS.get('user');\r\n\t}\r\n\tquerySearch(query,country){\r\n\t\t\tlet\r\n\t\t\t\tfields = country?'name':'capital',\r\n\t\t\t\ttype = query?fields:'all',\r\n\t\t\t\tdeferred = $q.defer();\r\n\t\t\tcontryREST.query({\r\n\t\t\t\ttype,\r\n\t\t\t\tcountry: query.toLowerCase(),\r\n\t\t\t\tfields: (!country?fields:fields + ';capital')\r\n\t\t\t}, result => {\r\n\t\t\t\tdeferred.resolve( result );\r\n\t\t\t}, error => {\r\n\t\t\t\tlog( 'error',error );\r\n\t\t\t});\r\n\t\t\treturn deferred.promise;\r\n\t\t}\r\n\tselectedItemChange( obj ){\r\n\t\t$log.info('Text changed to ' + JSON.stringify( obj ) );\r\n\t\tif( obj && obj.name ){\r\n\t\t\t$scope.user.country = obj.name;\r\n\t\t\tthis.searchTextCity = $scope.user.city = obj.capital;\r\n\t\t}\r\n\t\tif( obj && obj.capital ) $scope.user.city = obj.capital;\r\n\t}\r\n\tsearchTextChange( obj ){\r\n\t\t$log.info('Item changed to ' + JSON.stringify(obj));\r\n\t\tif( obj && obj.name ) $scope.user.country = obj.name;\r\n\t\tif( obj && obj.capital ) $scope.user.city = obj.capital;\r\n\t}\r\n\tsubmit(){\r\n\t\tlet oldUser = LS.get('user');\r\n\t\tlet users = LS.get('users') || [];\r\n\t\tLS.set('users',users.map( (el,id,arr) => oldUser.id === el.id ? $scope.user: el ));\r\n\t\tLS.set( 'user', $scope.user );\r\n\t}\r\n};\r\n\r\nProfileForm.$inject = ['$scope', '$timeout', '$q', '$log','contryREST'];\r\nexport default ProfileForm;\r\n\r\n","class RegistrationForm {\r\n\tconstructor( $scope, $location, $q, $log,contryREST ){\r\n\t\t$scope.user = {\r\n\t\t\tname: '',\r\n\t\t\temail: '',\r\n\t\t\tcountry: '',\r\n\t\t\tcity: '',\r\n\t\t\tpass: '',\r\n\t\t};\r\n\t\tthis._contryREST = contryREST;\r\n\t\tthis._$q = $q;\r\n\t}\r\n\tquerySearch( query,country ){\r\n\t\tlet fields = country?'name':'capital';\r\n\t\tlet type = query?fields:'all';\r\n\t\tlet deferred = this._$q.defer();\r\n\t\tthis._contryREST.query({\r\n\t\t\ttype,\r\n\t\t\tcountry: query.toLowerCase(),\r\n\t\t\tfields\r\n\t\t}, result => {\r\n\t\t\tdeferred.resolve( result );\r\n\t\t}, error => {\r\n\t\t\tconsole.log( 'error',error );\r\n\t\t});\r\n\t\tconsole.log()\r\n\t\treturn deferred.promise;\r\n\t}\r\n\tselectedItemChange( obj ){\r\n\t\t$log.info('Text changed to ' + JSON.stringify( obj ) );\r\n\t\tif( obj && obj.name ) $scope.user.country = obj.name;\r\n\t\tif( obj && obj.capital ) $scope.user.city = obj.capital;\r\n\t}\r\n\tsearchTextChange( obj ){\r\n\t\t$log.info('Item changed to ' + JSON.stringify(obj));\r\n\t\tif( obj && obj.name ) $scope.user.country = obj.name;\r\n\t\tif( obj && obj.capital ) $scope.user.city = obj.capital;\r\n\t}\r\n\tsubmit(){\r\n\t\tlet users = LS.get('users') || [];\r\n\t\tlet min = 1;\r\n\t\tlet max = 30;\r\n\t\t$scope.user.id = Math.floor( Math.random()* (max - min) + min );\r\n\t\tif( !users.some( (el)=> $scope.user.email === el.email ) ) users.push( $scope.user );\r\n\t\t$location.path('/login');\r\n\t\tLS.set('users',users);\r\n\t}\r\n};\r\n\r\nRegistrationForm.$inject = ['$scope', '$location', '$q', '$log','contryREST'];\r\nexport default RegistrationForm;","const log = console.log;\r\n\r\n\r\nimport LS from './LS';\r\nimport AppCtrl from './AppCtrl';\r\nimport LeftCtrl from './LeftCtrl';\r\nimport LoginForm from './LoginForm';\r\nimport RegistrationForm from './RegistrationForm';\r\nimport ProfileForm from './ProfileForm';\r\n\r\n\r\nlet userIsAuthenticated = function() {\r\n\treturn !!LS.get( 'login' );\r\n}\r\n\r\nlet loginRequired = function($location, $q) {\r\n\tlet deferred = $q.defer();\r\n\tif( !userIsAuthenticated() ) {\r\n\t\tdeferred.reject()\r\n\t\t$location.path('/login');\r\n\t} else {\r\n\t\tdeferred.resolve()\r\n\t}\r\n\treturn deferred.promise;\r\n};\r\n;(() => {\r\n\tangular.module('app', ['ngMaterial','ngResource','ui.router', 'ngMessages', ])\r\n\t.config(['$stateProvider','$urlRouterProvider',function($stateProvider, $urlRouterProvider) {\r\n\r\n\t\t$urlRouterProvider.otherwise('/registration');\r\n\r\n\t\t$stateProvider\r\n\t\t.state('registration', {\r\n\t\t\turl: '/registration',\r\n\t\t\ttemplateUrl: 'partial-registration.html',\r\n\t\t})\r\n\t\t.state('login', {\r\n\t\t\turl: '/login',\r\n\t\t\ttemplateUrl: 'partial-login.html',\r\n\t\t})\r\n\t\t.state('profile', {\r\n\t\t\turl: '/profile',\r\n\t\t\ttemplateUrl: 'partial-profile.html',\r\n\t\t\tresolve: { loginRequired: loginRequired }\r\n\t\t});\r\n\r\n\r\n\t}])\r\n\t.controller('AppCtrl', AppCtrl)\r\n\t.controller('LeftCtrl', LeftCtrl)\r\n\t.controller('LoginForm', LoginForm)\r\n\t.controller('RegistrationForm', RegistrationForm)\r\n\t.controller('ProfileForm', ProfileForm)\r\n\t.factory('contryREST',[\r\n\t\t'$resource',\r\n\t\t$resource => $resource('https://restcountries.eu/rest/v2/:type/:country:city',{\r\n\t\t\ttype: '@type',\r\n\t\t\tcountry: '@country',\r\n\t\t\tcity: '@city',\r\n\t\t\tfields: '@fields'\r\n\t\t})\r\n\t]);\r\n})();"]}